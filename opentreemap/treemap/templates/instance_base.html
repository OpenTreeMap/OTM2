{% extends "base.html" %}
{% load i18n %}
{% load form_extras %}

{% block instance_title %} | {{ request.instance.name }}{% endblock %}

{% block instancetopnav %}
<li><a href="{% url 'map' instance_url_name=request.instance.url_name %}">{% trans "Explore Trees" %}</a></li>
<li><a href="{% url 'map' instance_url_name=request.instance.url_name %}#addtree">{% trans "Add a Tree" %}</a></li>
{% endblock instancetopnav %}

{% block subhead %}
<div class="subhead">
  <div style="display: inline;" id="tree-and-planting-site-counts">
    <!-- This is what the counts will look like -->
    <!-- <span id="tree-count">4567</span> trees, <span id="planting-site-count">10,683</span> planting sites -->
  </div>
  <a href="javascript:;" class="btn btn-primary btn-mini exportBtn"><i class="icon-share"></i> Export Search Results</a>
  <a href="javascript:;" class="btn btn-primary addBtn">Add a Tree</a>
</div>
{% endblock subhead %}

{% block search %}
<div class="search-block-wrapper">
  <!--Species Search-->
  <div class="search-block visible-desktop">
    <h3>{% trans "Search by Species" %}</h3>
    <div class="search-field-group">
      <input type="text" data-class="search" id="species-typeahead" placeholder="American basswood"/>
      <input name="tree.species" data-search-type="IS" type="hidden" id="search-species" />
    </div>
  </div>

  <!-- Location Search -->
  <div class="search-block">
    <h3>{% trans "Search by Location" %}</h3>
    <div class="search-field-group">
      <input type="text" data-class="search" id="boundary-typeahead" placeholder="340 N 12th St, Philadelphia"/>
      <input name="plot.geom" data-search-type="IN_BOUNDARY" type="hidden" id="boundary" />
    </div>
  </div>
</div> <!-- end search block wrapper -->
{% endblock search %}

{% block searchoptions %}
<div class="search-options">
  <a id="perform-search" class="btn btn-primary btn-large btn-block">{% trans "Search" %}</a>
  <div class="btn-group">
    <button id="search-advanced" class="btn">{% trans "Advanced" %}</button>
    <button id="search-reset" class="btn">{% trans "Reset" %}</button>
  </div>
</div>
{% endblock searchoptions %}
{% block advancedsearch %}
<div id="advanced-search-pane" style="display: none;">
  {% for search in request.instance.advanced_search_fields %}
  {% search from search.identifier for request.user in request.instance withtemplate "treemap/field/search.html" %}
  {% endfor %}
</div>
{% endblock advancedsearch %}

{% block searchscripts %}
<script type="text/javascript">
    (function(require) {
        require("searchBar").init(otm.settings);
    })(require);
</script>
{% endblock searchscripts %}

{% block templates %}
{% verbatim %}
<script id="species-element-template" type="text/x-mustache-template">
  <p>{{common_name}}</p>
  <p>{{scientific_name}}</p>
</script>
<script id="boundary-element-template" type="text/x-mustache-template">
  <p>{{name}}</p>
  <p>{{category}}</p>
</script>

<script id="geocode-results-template" type="text/x-mustache-template">
<ul class="unstyled">
{{#candidates}}
<li><a href="javascript:;" data-class="geocode-result" data-x="{{x}}" data-y="{{y}}" data-srid="{{srid}}" data-address"{{address}}">{{address}}</a></li>
{{/candidates}}
</ul>
</script>

{% endverbatim %}
{% endblock templates %}
