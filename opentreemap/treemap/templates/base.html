{% load i18n %}
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>{% block title %}OpenTreeMap{% block instance_title %}{% endblock %}{% block page_title %}{% endblock %}{% endblock title %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8" />

    {% if settings.TEMPLATE_DEBUG %}
    <link href="{{ STATIC_URL }}css/vendor.css" rel="stylesheet">
    {% else %}
    <link href="{{ STATIC_URL }}css/vendor.min.css" rel="stylesheet">
    {% endif %}

    {% block application_css %}
    {% if settings.TEMPLATE_DEBUG %}
    <link href="{{ STATIC_URL }}css/main.css" rel="stylesheet">
    {% else %}
    <link href="{{ STATIC_URL }}css/main.min.css" rel="stylesheet">
    {% endif %}
    {% endblock application_css %}

    <!--[if lt IE 9]>
      <script src="{{ STATIC_URL }}js/html5shiv.js"></script>
    <![endif]-->

    {% block head_extra %}
    {% endblock head_extra %}
  </head>
  <body>
    <div class="wrapper">
      {% block topnav %}
      <!-- Top Nav -->
      <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
          <ul class="nav pull-left">
            {% block instancetopnav %}
              {% if last_instance %}
              <li><a href="{% url 'map' instance_url_name=last_instance.url_name %}">{% trans "Explore Trees" %}</a></li>
              {% if request.user.is_authenticated %}
              <li><a data-class='add-tree' href="{% url 'map' instance_url_name=last_instance.url_name %}#addtree">{% trans "Add a Tree" %}</a></li>
              {% else %}
              <li><a href="{% url 'django.contrib.auth.views.login' %}?next={{ request.get_full_path }}">{% trans "Add a Tree" %}</a>
              {% endif %}
              {% endif %}
            {% endblock instancetopnav %}
          </ul>
          <ul class="nav pull-right">
            {% if request.user.is_authenticated %}
              <li><a href="{% url 'profile' %}">{% trans "My Account" %} <span class="reputation">({{ request.user.rep }} rep)</span></a></li>
              <li><a href="{% url 'auth_logout' %}">{% trans "Logout" %}</a></li>
              <li class="user-img"><a href="{% url 'profile' %}"><img src="/static/img/profile.jpg"></a></li>
            {% else %}
              <li><a id="login" href="{% url 'auth_login' %}">{% trans "Login" %}</a></li>
              <li><a href="{% url 'registration_register' %}">{% trans "Sign Up" %}</a></li>
            {% endif %}
          </ul>
        </div>
      </div>
      {% endblock topnav %}

      {% block header %}
      <!-- Logo and Search -->
      <div class="header">

        {% block logo %}
        <div class="logo">
          <a href="{% if last_instance %}{% url 'map' instance_url_name=last_instance.url_name %}{% else %}/{% endif %}"
            ><img id="site-logo" src="{{ logo_url }}" alt="OpenTreeMap">
          </a>
        </div>
        {% endblock logo %}

        <div class="search-wrapper">
          {% block search %}
          {% endblock search %}
          {% block searchoptions %}
          {% endblock searchoptions %}
          {% block advancedsearch %}
          {% endblock advancedsearch %}
        </div>

      </div> <!-- end header -->
      {% endblock header %}

      {% block subhead %}
      {% endblock subhead %}

      {% block content %}
      {% endblock content %}

    </div>

    {% block footer %}
    <footer>
      <div class="footer-inner">
        <ul class="inline pull-left">
          <li><a href="javascript:;">{% trans "Tree Key" %}</a></li>
          <li><a href="javascript:;">{% trans "Resources" %}</a></li>
          <li><a href="javascript:;">{% trans "FAQ" %}</a></li>
          <li><a href="javascript:;">{% trans "About" %}</a></li>
          <li><a href="javascript:;">{% trans "Contact" %}</a></li>
        </ul>
        <a href="javascript:;" class="pull-right partners">Partners</a>
      </div>
    </footer>
    {% endblock footer %}

    {% block config_scripts %}
      {% if request.instance %}
        <script src="{{ SITE_ROOT }}{{ request.instance.url_name }}/config/settings.js"></script>
      {% else %}
        <script src="{{ SITE_ROOT }}config/settings.js"></script>
      {% endif %}
    {% endblock config_scripts %}

    {% block global_scripts %}
      {% if settings.USE_JS_I18N %}
      <script type="text/javascript" src="{% url 'django.views.i18n.javascript_catalog' %}"></script>
      {% endif %}
      {% if settings.TEMPLATE_DEBUG %}
      <script src="{{ STATIC_URL }}js/treemap.js"></script>
      {% else %}
      <script src="{{ STATIC_URL }}js/treemap.min.js"></script>
      {% endif %}
    {% endblock global_scripts %}

    {% block templates %}
    {% endblock templates %}

    {% block scripts %}
    {% endblock scripts %}
    {% block searchscripts %}
    {% endblock searchscripts %}

    {% block endbody %}
    {% endblock endbody %}

  </body>
</html>
